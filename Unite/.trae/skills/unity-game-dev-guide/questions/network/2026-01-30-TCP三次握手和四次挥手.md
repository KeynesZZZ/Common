---
title: "TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹"
date: "2026-01-30 10:00:00"
tags: [Unity, ç½‘ç»œç¼–ç¨‹, TCP, åè®®]
difficulty: "åŸºç¡€"
topic: "ç½‘ç»œç¼–ç¨‹"
project: "å¤šäººåœ¨çº¿æ¸¸æˆ"
skill_level: "åˆçº§"
---

# TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹

## é—®é¢˜æè¿°
> è¯·è¯¦ç»†è§£é‡ŠTCPçš„ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ï¼Œä»¥åŠå®ƒä»¬åœ¨æ¸¸æˆå¼€å‘ä¸­çš„åº”ç”¨ã€‚

## å›ç­”

### 1. é—®é¢˜åˆ†æ
**æŠ€æœ¯èƒŒæ™¯**ï¼š
- TCPï¼ˆTransmission Control Protocolï¼‰æ˜¯ä¸€ç§é¢å‘è¿æ¥çš„ã€å¯é çš„ã€åŸºäºå­—èŠ‚æµçš„ä¼ è¾“å±‚é€šä¿¡åè®®
- å®ƒæ˜¯Internetåè®®æ—ä¸­æœ€æ ¸å¿ƒçš„åè®®ä¹‹ä¸€ï¼Œä¸ºä¸Šå±‚åº”ç”¨æä¾›å¯é çš„æ•°æ®ä¼ è¾“æœåŠ¡
- åœ¨æ¸¸æˆå¼€å‘ä¸­ï¼ŒTCPå¸¸ç”¨äºéœ€è¦å¯é ä¼ è¾“çš„åœºæ™¯ï¼Œå¦‚ç™»å½•è®¤è¯ã€ç©å®¶æ•°æ®åŒæ­¥ç­‰

**æ ¹æœ¬åŸå› **ï¼š
- TCPéœ€è¦é€šè¿‡ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œç¡®ä¿é€šä¿¡åŒæ–¹éƒ½äº†è§£å¯¹æ–¹çš„å‘é€å’Œæ¥æ”¶èƒ½åŠ›
- å››æ¬¡æŒ¥æ‰‹åˆ™æ˜¯ä¸ºäº†ç¡®ä¿åŒæ–¹éƒ½å·²å®Œæˆæ•°æ®ä¼ è¾“ï¼Œé¿å…æ•°æ®ä¸¢å¤±
- ç†è§£è¿™äº›è¿‡ç¨‹å¯¹äºä¼˜åŒ–æ¸¸æˆç½‘ç»œæ€§èƒ½å’Œè§£å†³ç½‘ç»œé—®é¢˜è‡³å…³é‡è¦

**è§£å†³æ–¹æ¡ˆæ¦‚è¿°**ï¼š
- è¯¦ç»†è§£é‡ŠTCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„å…·ä½“è¿‡ç¨‹
- åˆ†ææ¯ä¸ªæ­¥éª¤çš„ä½œç”¨å’Œå¿…è¦æ€§
- è®¨è®ºåœ¨æ¸¸æˆå¼€å‘ä¸­çš„åº”ç”¨å’Œä¼˜åŒ–ç­–ç•¥
- æä¾›ç›¸å…³ä»£ç ç¤ºä¾‹å’Œæœ€ä½³å®è·µ

**æŠ€æœ¯éš¾åº¦**ï¼šåŸºç¡€
**é€‚ç”¨åœºæ™¯**ï¼šéœ€è¦å¯é æ•°æ®ä¼ è¾“çš„æ¸¸æˆç½‘ç»œé€šä¿¡ï¼Œå¦‚ç™»å½•ã€èŠå¤©ã€äº¤æ˜“ç³»ç»Ÿç­‰
**å…³è”é¡¹ç›®**ï¼šå¤šäººåœ¨çº¿è§’è‰²æ‰®æ¼”æ¸¸æˆï¼ˆMMORPGï¼‰ã€å®æ—¶æˆ˜ç•¥æ¸¸æˆï¼ˆRTSï¼‰

### 2. æ¡ˆä¾‹æ¼”ç¤º

#### TCPä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹
**è¿‡ç¨‹è¯¦è§£**ï¼š

1. **ç¬¬ä¸€æ¬¡æ¡æ‰‹**ï¼šå®¢æˆ·ç«¯å‘é€SYNåŒ…ï¼ˆSYN=1ï¼Œseq=xï¼‰åˆ°æœåŠ¡å™¨ï¼Œè¿›å…¥SYN_SENTçŠ¶æ€
2. **ç¬¬äºŒæ¬¡æ¡æ‰‹**ï¼šæœåŠ¡å™¨æ”¶åˆ°SYNåŒ…ï¼Œå‘é€SYN+ACKåŒ…ï¼ˆSYN=1ï¼ŒACK=1ï¼Œseq=yï¼Œack=x+1ï¼‰ï¼Œè¿›å…¥SYN_RECVçŠ¶æ€
3. **ç¬¬ä¸‰æ¬¡æ¡æ‰‹**ï¼šå®¢æˆ·ç«¯æ”¶åˆ°SYN+ACKåŒ…ï¼Œå‘é€ACKåŒ…ï¼ˆACK=1ï¼Œseq=x+1ï¼Œack=y+1ï¼‰ï¼Œè¿›å…¥ESTABLISHEDçŠ¶æ€
4. **è¿æ¥å»ºç«‹**ï¼šæœåŠ¡å™¨æ”¶åˆ°ACKåŒ…ï¼Œè¿›å…¥ESTABLISHEDçŠ¶æ€ï¼Œè¿æ¥æ­£å¼å»ºç«‹

**ç¤ºæ„å›¾**ï¼š
```
å®¢æˆ·ç«¯                                  æœåŠ¡å™¨
  |                                      |
  |---- SYN (seq=x) -------------------->|  SYN_SENT
  |                                      |  --> SYN_RECV
  |<--- SYN+ACK (seq=y, ack=x+1) --------|
  |  --> ESTABLISHED                     |
  |---- ACK (seq=x+1, ack=y+1) --------->|
  |                                      |  --> ESTABLISHED
  |                                      |
  |======== æ•°æ®ä¼ è¾“é˜¶æ®µ =================|
  |                                      |
```

#### TCPå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹
**è¿‡ç¨‹è¯¦è§£**ï¼š

1. **ç¬¬ä¸€æ¬¡æŒ¥æ‰‹**ï¼šå®¢æˆ·ç«¯å‘é€FINåŒ…ï¼ˆFIN=1ï¼Œseq=uï¼‰åˆ°æœåŠ¡å™¨ï¼Œè¿›å…¥FIN_WAIT_1çŠ¶æ€
2. **ç¬¬äºŒæ¬¡æŒ¥æ‰‹**ï¼šæœåŠ¡å™¨æ”¶åˆ°FINåŒ…ï¼Œå‘é€ACKåŒ…ï¼ˆACK=1ï¼Œseq=vï¼Œack=u+1ï¼‰ï¼Œè¿›å…¥CLOSE_WAITçŠ¶æ€
3. **ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹**ï¼šæœåŠ¡å™¨å‘é€FINåŒ…ï¼ˆFIN=1ï¼ŒACK=1ï¼Œseq=wï¼Œack=u+1ï¼‰ï¼Œè¿›å…¥LAST_ACKçŠ¶æ€
4. **ç¬¬å››æ¬¡æŒ¥æ‰‹**ï¼šå®¢æˆ·ç«¯æ”¶åˆ°FINåŒ…ï¼Œå‘é€ACKåŒ…ï¼ˆACK=1ï¼Œseq=u+1ï¼Œack=w+1ï¼‰ï¼Œè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œç­‰å¾…2MSLåå…³é—­
5. **è¿æ¥å…³é—­**ï¼šæœåŠ¡å™¨æ”¶åˆ°ACKåŒ…ï¼Œè¿›å…¥CLOSEDçŠ¶æ€

**ç¤ºæ„å›¾**ï¼š
```
å®¢æˆ·ç«¯                                  æœåŠ¡å™¨
  |                                      |
  |---- FIN (seq=u) -------------------->|  FIN_WAIT_1
  |                                      |  --> CLOSE_WAIT
  |<--- ACK (ack=u+1) -------------------|
  |  --> FIN_WAIT_2                      |
  |<--- FIN+ACK (seq=w, ack=u+1) --------|
  |  --> TIME_WAIT                       |  --> LAST_ACK
  |---- ACK (ack=w+1) ------------------->|
  |  (ç­‰å¾…2MSL)                           |  --> CLOSED
  |  --> CLOSED                          |
```

#### ä»£ç ç¤ºä¾‹ï¼ˆUnityä¸­ä½¿ç”¨TCPï¼‰
**åŸºç¡€å®ç°**ï¼š
```csharp
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;
using UnityEngine;

public class TCPClientExample : MonoBehaviour
{
    private TcpClient client;
    private NetworkStream stream;
    private Thread receiveThread;
    private bool isConnected = false;
    
    [SerializeField] private string serverIP = "127.0.0.1";
    [SerializeField] private int serverPort = 8888;
    
    private void Start()
    {
        ConnectToServer();
    }
    
    private void ConnectToServer()
    {
        try
        {
            client = new TcpClient();
            client.Connect(serverIP, serverPort);
            stream = client.GetStream();
            isConnected = true;
            
            receiveThread = new Thread(ReceiveData);
            receiveThread.Start();
            
            Debug.Log("Connected to server successfully!");
        }
        catch (Exception e)
        {
            Debug.LogError("Connection error: " + e.Message);
        }
    }
    
    private void ReceiveData()
    {
        byte[] buffer = new byte[1024];
        int bytesRead;
        
        while (isConnected)
        {
            try
            {
                bytesRead = stream.Read(buffer, 0, buffer.Length);
                if (bytesRead > 0)
                {
                    string data = Encoding.UTF8.GetString(buffer, 0, bytesRead);
                    Debug.Log("Received: " + data);
                }
            }
            catch (Exception e)
            {
                Debug.LogError("Receive error: " + e.Message);
                isConnected = false;
            }
        }
    }
    
    public void SendData(string message)
    {
        if (isConnected && stream != null)
        {
            try
            {
                byte[] data = Encoding.UTF8.GetBytes(message);
                stream.Write(data, 0, data.Length);
            }
            catch (Exception e)
            {
                Debug.LogError("Send error: " + e.Message);
            }
        }
    }
    
    private void OnApplicationQuit()
    {
        Disconnect();
    }
    
    private void Disconnect()
    {
        isConnected = false;
        
        if (receiveThread != null && receiveThread.IsAlive)
        {
            receiveThread.Abort();
        }
        
        if (stream != null)
        {
            stream.Close();
        }
        
        if (client != null)
        {
            client.Close();
        }
    }
}
```

**æœåŠ¡å™¨ç«¯ç¤ºä¾‹**ï¼š
```csharp
using System;
using System.Net;
using System.Net.Sockets;
using System.Text;
using System.Threading;

public class TCPServerExample
{
    private TcpListener listener;
    private bool isRunning = false;
    
    public void StartServer(int port)
    {
        listener = new TcpListener(IPAddress.Any, port);
        listener.Start();
        isRunning = true;
        
        Console.WriteLine("Server started on port " + port);
        
        Thread listenThread = new Thread(ListenForClients);
        listenThread.Start();
    }
    
    private void ListenForClients()
    {
        while (isRunning)
        {
            try
            {
                TcpClient client = listener.AcceptTcpClient();
                Thread clientThread = new Thread(HandleClient);
                clientThread.Start(client);
            }
            catch (Exception e)
            {
                Console.WriteLine("Error accepting client: " + e.Message);
            }
        }
    }
    
    private void HandleClient(object clientObj)
    {
        TcpClient client = (TcpClient)clientObj;
        NetworkStream stream = client.GetStream();
        byte[] buffer = new byte[1024];
        int bytesRead;
        
        Console.WriteLine("Client connected: " + ((IPEndPoint)client.Client.RemoteEndPoint).Address);
        
        while (isRunning)
        {
            try
            {
                bytesRead = stream.Read(buffer, 0, buffer.Length);
                if (bytesRead == 0)
                {
                    break;
                }
                
                string data = Encoding.UTF8.GetString(buffer, 0, bytesRead);
                Console.WriteLine("Received: " + data);
                
                // Echo back the data
                byte[] response = Encoding.UTF8.GetBytes("Server: " + data);
                stream.Write(response, 0, response.Length);
            }
            catch (Exception e)
            {
                Console.WriteLine("Error handling client: " + e.Message);
                break;
            }
        }
        
        stream.Close();
        client.Close();
        Console.WriteLine("Client disconnected");
    }
    
    public void StopServer()
    {
        isRunning = false;
        if (listener != null)
        {
            listener.Stop();
        }
    }
}
```

**å®ç°è¯´æ˜**ï¼š
- **å®¢æˆ·ç«¯**ï¼šä½¿ç”¨`TcpClient`ç±»è¿æ¥æœåŠ¡å™¨ï¼Œé€šè¿‡`NetworkStream`å‘é€å’Œæ¥æ”¶æ•°æ®
- **æœåŠ¡å™¨**ï¼šä½¿ç”¨`TcpListener`ç›‘å¬å®¢æˆ·ç«¯è¿æ¥ï¼Œä¸ºæ¯ä¸ªå®¢æˆ·ç«¯åˆ›å»ºå•ç‹¬çš„çº¿ç¨‹å¤„ç†
- **æ•°æ®ä¼ è¾“**ï¼šä½¿ç”¨å­—èŠ‚æ•°ç»„å’ŒUTF8ç¼–ç è¿›è¡Œæ•°æ®è½¬æ¢
- **é”™è¯¯å¤„ç†**ï¼šåŒ…å«åŸºæœ¬çš„å¼‚å¸¸å¤„ç†ï¼Œç¡®ä¿è¿æ¥ç¨³å®š

### 3. æ³¨æ„äº‹é¡¹
**å…³é”®è¦ç‚¹**ï¼š
- ğŸ“Œ TCPä¸‰æ¬¡æ¡æ‰‹çš„å¿…è¦æ€§ï¼šç¡®ä¿åŒæ–¹éƒ½äº†è§£å¯¹æ–¹çš„å‘é€å’Œæ¥æ”¶èƒ½åŠ›ï¼Œé¿å…èµ„æºæµªè´¹
- ğŸ“Œ TCPå››æ¬¡æŒ¥æ‰‹çš„å¿…è¦æ€§ï¼šç¡®ä¿åŒæ–¹éƒ½å·²å®Œæˆæ•°æ®ä¼ è¾“ï¼Œé¿å…æ•°æ®ä¸¢å¤±
- ğŸ“Œ TIME_WAITçŠ¶æ€ï¼šå®¢æˆ·ç«¯åœ¨å››æ¬¡æŒ¥æ‰‹åä¼šè¿›å…¥TIME_WAITçŠ¶æ€ï¼Œç­‰å¾…2MSLæ—¶é—´ï¼Œç¡®ä¿ç½‘ç»œä¸­çš„å»¶è¿Ÿæ•°æ®åŒ…è¢«æ­£ç¡®å¤„ç†
- ğŸ“Œ SYNæ”»å‡»ï¼šæ¶æ„å®¢æˆ·ç«¯å‘é€å¤§é‡SYNåŒ…ä½†ä¸å®Œæˆä¸‰æ¬¡æ¡æ‰‹ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½
- ğŸ“Œ è¿æ¥è¶…æ—¶ï¼šéœ€è¦è®¾ç½®åˆç†çš„è¿æ¥è¶…æ—¶æ—¶é—´ï¼Œé¿å…é•¿æ—¶é—´ç­‰å¾…

**ä¼˜åŒ–å»ºè®®**ï¼š
- ğŸš€ ä½¿ç”¨è¿æ¥æ± ï¼šå¤ç”¨TCPè¿æ¥ï¼Œå‡å°‘ä¸‰æ¬¡æ¡æ‰‹çš„å¼€é”€
- ğŸš€ è®¾ç½®åˆç†çš„TCPå‚æ•°ï¼šå¦‚SO_RCVBUFã€SO_SNDBUFã€TCP_NODELAYç­‰
- ğŸš€ å®ç°å¿ƒè·³æœºåˆ¶ï¼šå®šæœŸå‘é€å°æ•°æ®åŒ…ï¼Œæ£€æµ‹è¿æ¥çŠ¶æ€
- ğŸš€ ä½¿ç”¨éé˜»å¡IOæˆ–å¼‚æ­¥IOï¼šæé«˜æœåŠ¡å™¨å¤„ç†å¹¶å‘è¿æ¥çš„èƒ½åŠ›
- ğŸš€ è€ƒè™‘ä½¿ç”¨WebSocketï¼šåœ¨Webç¯å¢ƒä¸­æä¾›å…¨åŒå·¥é€šä¿¡

**è·¨å¹³å°è€ƒé‡**ï¼š
- ä¸åŒå¹³å°çš„TCPå®ç°å¯èƒ½æœ‰ç»†å¾®å·®åˆ«ï¼Œä½†åŸºæœ¬åŸç†ç›¸åŒ
- ç§»åŠ¨å¹³å°ä¸Šéœ€è¦ç‰¹åˆ«æ³¨æ„ç½‘ç»œåˆ‡æ¢ï¼ˆå¦‚WiFiåˆ°ç§»åŠ¨æ•°æ®ï¼‰æ—¶çš„è¿æ¥ç®¡ç†
- WebGLå¹³å°é™åˆ¶è¾ƒå¤šï¼Œå»ºè®®ä½¿ç”¨WebSocketæˆ–HTTPè¯·æ±‚

**è®°å¿†è¦ç‚¹**ï¼š
- ä¸‰æ¬¡æ¡æ‰‹ï¼šè¯·æ±‚â†’ç¡®è®¤â†’ç¡®è®¤ï¼Œç¡®ä¿åŒæ–¹å°±ç»ª
- å››æ¬¡æŒ¥æ‰‹ï¼šè¯·æ±‚å…³é—­â†’ç¡®è®¤â†’è¯·æ±‚å…³é—­â†’ç¡®è®¤ï¼Œç¡®ä¿æ•°æ®ä¼ è¾“å®Œæˆ
- TIME_WAITï¼šç­‰å¾…2MSLï¼Œå¤„ç†å»¶è¿Ÿæ•°æ®åŒ…
- è¿æ¥ç®¡ç†ï¼šåˆç†ä½¿ç”¨è¿æ¥æ± ï¼Œå®ç°å¿ƒè·³æœºåˆ¶

### 4. å®ç°åŸç†
**åº•å±‚å®ç°**ï¼š
- TCPæ˜¯åŸºäºIPåè®®çš„ä¼ è¾“å±‚åè®®ï¼Œæä¾›å¯é çš„ã€é¢å‘è¿æ¥çš„é€šä¿¡
- ä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶å®ç°æµé‡æ§åˆ¶å’Œæ‹¥å¡æ§åˆ¶
- ä½¿ç”¨åºå·å’Œç¡®è®¤æœºåˆ¶ç¡®ä¿æ•°æ®çš„å¯é ä¼ è¾“
- ä½¿ç”¨æ ¡éªŒå’Œæœºåˆ¶æ£€æµ‹æ•°æ®ä¼ è¾“é”™è¯¯

**TCPå¤´éƒ¨ç»“æ„**ï¼š
```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Source Port          |       Destination Port        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Sequence Number                        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Acknowledgment Number                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Data |           |U|A|P|R|S|F|                               |
| Offset| Reserved  |R|C|S|S|Y|I|            Window             |
|       |           |G|K|H|T|N|N|                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Checksum            |         Urgent Pointer        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Options                    |    Padding    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                             data                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

**å…³é”®æ ‡å¿—ä½**ï¼š
- **SYN**ï¼ˆSynchronizeï¼‰ï¼šç”¨äºå»ºç«‹è¿æ¥æ—¶åŒæ­¥åºå·
- **ACK**ï¼ˆAcknowledgmentï¼‰ï¼šç¡®è®¤æ¥æ”¶çš„æ•°æ®
- **FIN**ï¼ˆFinishï¼‰ï¼šè¡¨ç¤ºå‘é€æ–¹å·²å®Œæˆæ•°æ®ä¼ è¾“ï¼Œè¯·æ±‚å…³é—­è¿æ¥
- **RST**ï¼ˆResetï¼‰ï¼šé‡ç½®è¿æ¥
- **PSH**ï¼ˆPushï¼‰ï¼šå‚¬ä¿ƒæ¥æ”¶æ–¹ç«‹å³å¤„ç†æ•°æ®
- **URG**ï¼ˆUrgentï¼‰ï¼šæŒ‡ç¤ºç´§æ€¥æ•°æ®

**æ ¸å¿ƒé€»è¾‘æµç¨‹**ï¼š
1. **è¿æ¥å»ºç«‹**ï¼šé€šè¿‡ä¸‰æ¬¡æ¡æ‰‹ï¼ŒåŒæ–¹åå•†åˆå§‹åºå·å’Œçª—å£å¤§å°
2. **æ•°æ®ä¼ è¾“**ï¼šä½¿ç”¨æ»‘åŠ¨çª—å£æœºåˆ¶ï¼Œæ‰¹é‡å‘é€æ•°æ®å¹¶ç­‰å¾…ç¡®è®¤
3. **æµé‡æ§åˆ¶**ï¼šæ ¹æ®æ¥æ”¶æ–¹çš„çª—å£å¤§å°è°ƒæ•´å‘é€é€Ÿç‡
4. **æ‹¥å¡æ§åˆ¶**ï¼šæ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´å‘é€é€Ÿç‡ï¼Œé¿å…ç½‘ç»œæ‹¥å¡
5. **è¿æ¥å…³é—­**ï¼šé€šè¿‡å››æ¬¡æŒ¥æ‰‹ï¼Œç¡®ä¿åŒæ–¹éƒ½å·²å®Œæˆæ•°æ®ä¼ è¾“

### 5. çŸ¥è¯†ç‚¹æ€»ç»“
**æ ¸å¿ƒæ¦‚å¿µ**ï¼š
- TCPçš„é¢å‘è¿æ¥ç‰¹æ€§ï¼šé€šä¿¡å‰éœ€è¦å»ºç«‹è¿æ¥ï¼Œé€šä¿¡åéœ€è¦å…³é—­è¿æ¥
- å¯é ä¼ è¾“æœºåˆ¶ï¼šåºå·ã€ç¡®è®¤ã€é‡ä¼ ã€æ ¡éªŒå’Œç­‰
- æµé‡æ§åˆ¶ï¼šæ ¹æ®æ¥æ”¶æ–¹çš„å¤„ç†èƒ½åŠ›è°ƒæ•´å‘é€é€Ÿç‡
- æ‹¥å¡æ§åˆ¶ï¼šæ ¹æ®ç½‘ç»œçŠ¶å†µè°ƒæ•´å‘é€é€Ÿç‡
- è¿æ¥ç®¡ç†ï¼šä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œå››æ¬¡æŒ¥æ‰‹å…³é—­è¿æ¥

**æŠ€æœ¯è¦ç‚¹**ï¼š
- ä¸‰æ¬¡æ¡æ‰‹çš„å…·ä½“è¿‡ç¨‹å’Œæ¯ä¸ªæ­¥éª¤çš„ä½œç”¨
- å››æ¬¡æŒ¥æ‰‹çš„å…·ä½“è¿‡ç¨‹å’Œæ¯ä¸ªæ­¥éª¤çš„ä½œç”¨
- TIME_WAITçŠ¶æ€çš„ä½œç”¨å’ŒæŒç»­æ—¶é—´
- TCPå¤´éƒ¨çš„ç»“æ„å’Œå…³é”®æ ‡å¿—ä½
- å¸¸è§çš„TCPå‚æ•°å’Œä¼˜åŒ–æ–¹æ³•

**åº”ç”¨åœºæ™¯**ï¼š
- éœ€è¦å¯é ä¼ è¾“çš„æ¸¸æˆç³»ç»Ÿï¼šç™»å½•è®¤è¯ã€ç©å®¶æ•°æ®åŒæ­¥ã€äº¤æ˜“ç³»ç»Ÿ
- å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜çš„åœºæ™¯ï¼šæ’è¡Œæ¦œã€æˆå°±ç³»ç»Ÿã€é‚®ä»¶ç³»ç»Ÿ
- å¸¦å®½å……è¶³ä½†å¯¹å»¶è¿Ÿä¸æ•æ„Ÿçš„åœºæ™¯ï¼šèµ„æºä¸‹è½½ã€å¤§æ–‡ä»¶ä¼ è¾“

**å­¦ä¹ å»ºè®®**ï¼š
- æ·±å…¥å­¦ä¹ TCP/IPåè®®æ ˆçš„åŸºæœ¬åŸç†
- äº†è§£å¸¸è§çš„ç½‘ç»œç¼–ç¨‹æ¨¡å‹ï¼šé˜»å¡IOã€éé˜»å¡IOã€å¼‚æ­¥IO
- å­¦ä¹ ä½¿ç”¨Wiresharkç­‰å·¥å…·åˆ†æç½‘ç»œæµé‡
- å®è·µç¼–å†™ç®€å•çš„TCPå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨
- äº†è§£æ¸¸æˆå¼€å‘ä¸­å¸¸ç”¨çš„ç½‘ç»œåº“ï¼šMirrorã€Photonã€UNetç­‰

**è¿›é˜¶è·¯å¾„**ï¼š
- å­¦ä¹ UDPåè®®åŠå…¶åœ¨æ¸¸æˆä¸­çš„åº”ç”¨
- ç ”ç©¶æ¸¸æˆç½‘ç»œåŒæ­¥æŠ€æœ¯ï¼šçŠ¶æ€åŒæ­¥å’Œå¸§åŒæ­¥
- äº†è§£ç½‘ç»œå®‰å…¨ï¼šåŠ å¯†ã€è®¤è¯ã€é˜²ä½œå¼Š
- å­¦ä¹ æœåŠ¡å™¨æ¶æ„è®¾è®¡ï¼šè´Ÿè½½å‡è¡¡ã€é›†ç¾¤ã€åˆ†å¸ƒå¼
- ç ”ç©¶è¾¹ç¼˜è®¡ç®—å’Œäº‘æ¸¸æˆæŠ€æœ¯

### 6. é¡¹ç›®å®è·µ
**é¡¹ç›®æ¡ˆä¾‹**ï¼š
- **å¤šäººåœ¨çº¿èŠå¤©ç³»ç»Ÿ**ï¼šä½¿ç”¨TCPå®ç°å¯é çš„æ¶ˆæ¯ä¼ é€’
- **å›åˆåˆ¶æ¸¸æˆ**ï¼šä½¿ç”¨TCPä¼ è¾“æ¸¸æˆçŠ¶æ€å’Œç©å®¶æ“ä½œ
- **MMORPGç™»å½•ç³»ç»Ÿ**ï¼šä½¿ç”¨TCPè¿›è¡Œèº«ä»½éªŒè¯å’Œæ•°æ®åŠ è½½
- **æ’è¡Œæ¦œç³»ç»Ÿ**ï¼šä½¿ç”¨TCPä¼ è¾“ç©å®¶åˆ†æ•°å’Œæ’åæ•°æ®

**å¼€å‘æµç¨‹**ï¼š
1. **éœ€æ±‚åˆ†æ**ï¼šç¡®å®šç½‘ç»œé€šä¿¡çš„å…·ä½“éœ€æ±‚å’Œåœºæ™¯
2. **æŠ€æœ¯é€‰å‹**ï¼šé€‰æ‹©åˆé€‚çš„ç½‘ç»œåº“å’Œåè®®
3. **æ¶æ„è®¾è®¡**ï¼šè®¾è®¡å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨çš„é€šä¿¡æ¶æ„
4. **å®ç°åŸå‹**ï¼šç¼–å†™åŸºæœ¬çš„ç½‘ç»œé€šä¿¡ä»£ç 
5. **æµ‹è¯•ä¼˜åŒ–**ï¼šæµ‹è¯•ç½‘ç»œæ€§èƒ½ï¼Œä¼˜åŒ–è¿æ¥ç®¡ç†
6. **é›†æˆä¸Šçº¿**ï¼šå°†ç½‘ç»œç³»ç»Ÿé›†æˆåˆ°æ¸¸æˆä¸­å¹¶å‘å¸ƒ

**æœ€ä½³å®è·µ**ï¼š
- **è¿æ¥ç®¡ç†**ï¼šå®ç°è¿æ¥æ± ï¼Œå¤ç”¨TCPè¿æ¥
- **é”™è¯¯å¤„ç†**ï¼šå®Œå–„çš„å¼‚å¸¸å¤„ç†å’Œé‡è¿æœºåˆ¶
- **æ•°æ®å‹ç¼©**ï¼šå¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œå‹ç¼©ï¼Œå‡å°‘å¸¦å®½ä½¿ç”¨
- **åè®®è®¾è®¡**ï¼šè®¾è®¡ç®€æ´é«˜æ•ˆçš„é€šä¿¡åè®®
- **å®‰å…¨æªæ–½**ï¼šå®ç°æ•°æ®åŠ å¯†å’Œèº«ä»½éªŒè¯

### 7. ç½‘ç»œæœç´¢ç»“æœ
**ç›¸å…³èµ„æ–™**ï¼š
- TCP/IPåè®®è¯¦è§£ï¼ˆå·1ï¼šåè®®ï¼‰- ç†æŸ¥å¾·Â·å²è’‚æ–‡æ–¯
- Unityå®˜æ–¹ç½‘ç»œç¼–ç¨‹æ–‡æ¡£
- MSDNæ–‡æ¡£ï¼šTcpClientå’ŒTcpListenerç±»
- RFC 793ï¼šTransmission Control Protocol

**ä¿¡æ¯éªŒè¯**ï¼š
- TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹å·²åœ¨å¤šä¸ªæƒå¨æ¥æºä¸­å¾—åˆ°éªŒè¯
- ä»£ç ç¤ºä¾‹åŸºäºMicrosoftå®˜æ–¹æ–‡æ¡£å’ŒUnityæœ€ä½³å®è·µ
- ä¼˜åŒ–å»ºè®®æ¥è‡ªæ¸¸æˆå¼€å‘ç¤¾åŒºçš„å®è·µç»éªŒ

**æƒå¨æ¥æº**ï¼š
- IETF RFCæ–‡æ¡£ï¼šhttps://tools.ietf.org/html/rfc793
- Microsoft Docsï¼šhttps://docs.microsoft.com/en-us/dotnet/api/system.net.sockets.tcpclient
- Unity Documentationï¼šhttps://docs.unity3d.com/Manual/UNet.html