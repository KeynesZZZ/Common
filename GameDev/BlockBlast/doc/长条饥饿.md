# 长条饥饿 (Long Bar Hunger)

这是玩家感知最明显的规则。系统会监控你棋盘上的空缺模式：

如果检测到你留出了一列或一行宽度为 $1$、长度为 $\ge 4$ 的空间，系统会判定你在**"等待长条"**。

- **反制逻辑**：此时，系统会把"长条"形状的生成概率从正常的例如 $10\%$ 临时降至 $2\%$ 甚至更低。
- **目的**：这种算法设计的目的是增加博弈感，防止玩家通过简单的"留一竖等长条"策略轻松刷高分。

---

"长条饥饿"算法（The Long Bar Hunger）是《Block Blast!》中最让玩家感到"受挫"但又欲罢不能的心理陷阱。它的技术本质是基于模式识别的概率抑制（Pattern-Based Probability Suppression）。

当你在棋盘上留出一整列或一整行，满心期待那个 $1 \times 5$ 的长条来完成一次"四连消"时，系统其实已经通过卷积扫描发现了你的意图。

## 1. 技术实现：如何"发现"你在等长条？

系统会定期对棋盘矩阵进行特征提取（Feature Extraction）。

### C# 逻辑实现：长条槽位检测器

```csharp
public class PatternDetector
{
    /// <summary>
    /// 检测棋盘是否存在特定的"长条空位特征"
    /// </summary>
    public bool IsWaitingForLongBar(int[,] board)
    {
        // 扫描垂直方向
        for (int x = 0; x < 8; x++)
        {
            int continuousEmpty = 0;
            for (int y = 0; y < 8; y++)
            {
                if (board[y, x] == 0) continuousEmpty++;
                else continuousEmpty = 0;

                // 如果发现连续 4-5 个空位，且两侧都被堵死（形成一个窄缝）
                if (continuousEmpty >= 4) 
                {
                    if (IsNarrowSlot(board, x, y, "vertical")) return true;
                }
            }
        }
        // 同理扫描水平方向...
        return false;
    }

    private bool IsNarrowSlot(int[,] board, int x, int y, string direction)
    {
        // 检测缝隙两侧是否都有方块，如果是，这就被定义为一个"槽位"
        // 系统会判定：玩家正在诱导长条出现
        return true; 
    }
}
```

## 2. 饥饿逻辑：概率的"负反馈"

一旦 `IsWaitingForLongBar` 返回 true，发牌引擎会立即修改该形状的生成权重：

- **动态降权**：将长条（$1 \times 4$ 或 $1 \times 5$）的权重从正常的权重（如 $10\%$）降至近乎于零（如 $0.5\%$）。
- **替代投放**：系统并不会停止发牌，它会从库中挑选出最能"破坏"这个槽位的方块。例如，如果你留的是 $1 \times 5$ 的竖槽，它会给你发一个 $2 \times 2$ 的方块。
- **生存压迫**：你每多等一回合，系统发放"巨型块"的概率就随之提高。这意味着你"等长条"的时间越长，棋盘被碎块填满的风险就呈指数级增长。

## 3. 为什么设计这个"恶意"机制？

- **打破单一策略**：如果长条随时都能等到，玩家会倾向于只用"留缝等长条"这一种策略，游戏会迅速变得无聊。
- **制造"损失厌恶"**：当你留了槽位但长条迟迟不来，你已经投入了大量的空间成本。此时你面临抉择：是继续等（风险极大），还是忍痛用碎块填掉（极度不爽）。这种心理博弈是成瘾的核心。
- **控制分数通胀**：长条能造成多行消除，获得高倍率 Combo。通过抑制长条，系统能有效地压低平均分数，让玩家觉得"拿高分真的很难，我还要再试一次"。

## 4. 高级反制技巧：如何"欺骗"发牌员？

既然知道了这是模式识别，老玩家通常会采用**"假动作"**：

- **不要预留完美的 $1 \times N$ 槽位**：保持空间的"多功能性"。比如留出一个 $2 \times N$ 的区域，这在系统眼中既能放长条，也能放 $L$ 型或方阵，系统很难判定你在等哪一种，从而不会触发针对性的降权。
- **主动填补**：如果等了 3 轮长条还没出，立刻放弃。用碎块填补槽位的一部分。有趣的是，当你一旦把槽位填了，系统往往会在下一轮立刻给你发长条（因为它判定你不再需要它，可以用来塞满你的空间了）。
- **利用影子模拟**：故意在边缘制造杂乱，迫使影子模拟算法为了保证"可行性"而不得不刷出长条。

## 总结

"长条饥饿"是《Block Blast!》中最具代表性的博弈算法。它不仅在玩棋盘数据，更是在玩你的心理预期。
